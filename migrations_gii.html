<!doctype html>
<html class="no-js" lang="fr">

  <head>
    <!-- meta data -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!--font-family-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet">

    <!-- title of site -->
    <title>MIGRATIONS</title>

    <!-- For favicon png -->
    <link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png"/>

    <!--font-awesome.min.css-->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">

    <!--flat icon css-->
    <link rel="stylesheet" href="assets/css/flaticon.css">

    <!--animate.css-->
    <link rel="stylesheet" href="assets/css/animate.css">

    <!--owl.carousel.css-->
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">

    <!--bootstrap.min.css-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- bootsnav -->
    <link rel="stylesheet" href="assets/css/bootsnav.css" >

    <!--style.css-->
    <link rel="stylesheet" href="assets/css/style.css">

    <!--responsive.css-->
    <link rel="stylesheet" href="assets/css/responsive.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <style>

      .tooltip {
          position: absolute;
          text-align: center;
          width: 150px;
          height: 40px;
          padding: 8px;
          margin-top: -20px;
          font: 10px sans-serif;
          background: #ddd;
          pointer-events: none;
      }

      </style>

  <body>
    <!--[if lte IE 9]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->

    <!-- top-area Start -->
    <header class="top-area">
      <div class="header-area">
        <!-- Start Navigation -->
        <nav class="navbar navbar-default bootsnav navbar-fixed dark no-background">

          <div class="container">

            <!-- Start Header Navigation -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                <i class="fa fa-bars"></i>
              </button>
              <a class="navbar-brand" href="index.html">MIGRATIONS</a>
            </div><!--/.navbar-header-->
            <!-- End Header Navigation -->

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse menu-ui-design" id="navbar-menu">
              <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
              <li class=" smooth-menu active"></li>
                <li class=" smooth-menu"><a href="index.html">Migrations par pays</a></li>
                <li class="smooth-menu"><a href="migrations_by_country_norm.html">Migrations par pays normalisées</a></li>
                <li class="smooth-menu"><a href="migrations_hdi.html">Migrations et IDH</a></li>
                <li class="smooth-menu"><a href="migrations_gii.html">Migrations et IIG</a></li>
                <li class="smooth-menu"><a href="migrations_unemployment.html">Migrations et chômage</a></li>
              </ul><!--/.nav -->
            </div><!-- /.navbar-collapse -->
          </div><!--/.container-->
        </nav><!--/nav-->
        <!-- End Navigation -->
      </div><!--/.header-area-->

      <div class="clearfix"></div>

    </header><!-- /.top-area-->
    <!-- top-area End -->

    <!--welcome-hero start -->
    <section id="empty" style="height:90px;">
      <div class="container">
      </div><!-- /.container-->

    </section><!--/.welcome-hero-->
    <!--welcome-hero end -->

    <!--about start -->
    <section id="about" class="about">
      <div class="section-heading text-center">
        <h2>Migrations et IIG</h2>
      </div>
      <div class="container">
        <div class="about-content">
          <div class="row">
            <!-- column with the map -->
            <div class="col-sm-8">
              <div class="scatter_div">
              </div>
            </div>

            <!-- column with the information -->
            <div class="col-sm-4">
              <div class="single-about-img">
              </div>

            </div>
          </div>
        </div>
      </div>
    </section><!--/.about-->
    <!--about end -->

    <!--footer-copyright start-->

    <!--footer-copyright end-->

    <!-- Include all js compiled plugins (below), or include individual files as needed -->

    <script src="assets/js/jquery.js"></script>

    <!--modernizr.min.js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>

    <!--bootstrap.min.js-->
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- bootsnav js -->
    <script src="assets/js/bootsnav.js"></script>

    <!-- jquery.sticky.js -->
    <script src="assets/js/jquery.sticky.js"></script>

    <!-- for progress bar start-->

    <!-- progressbar js -->
    <script src="assets/js/progressbar.js"></script>

    <!-- appear js -->
    <script src="assets/js/jquery.appear.js"></script>

    <!-- for progress bar end -->

    <!--owl.carousel.js-->
    <script src="assets/js/owl.carousel.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>


    <!--Custom JS-->
    <script src="assets/js/custom.js"></script>

    <!-- D3 tools -->
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <!-- create scatterplot -->
    <script type="text/javascript">
        var div = d3.select("body").append("div")
        .attr("class", "tooltip")
        .style("opacity", 0);

        var formatTime = d3.timeFormat("%Y");
        var margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

        var x = d3.scaleLinear()
        .range([0, width]);

        var y = d3.scaleTime()
        .range([height, 0]);

        var r = d3.scaleSqrt()
        .range([1,25]);

        var xAxis = d3.axisBottom()
        .scale(x);

        var yAxis = d3.axisLeft()
        .scale(y);

        var color = d3.scaleOrdinal(d3.schemeCategory20);

        var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        var tooltip = d3.select("body").append("div")
        .attr("class", "tooltip")
        .style("opacity", 0);
        var parseDate = d3.timeParse("%Y");



        d3.csv('data/iig.csv', function(error, data){
               var max_pop = 0;
               var min_pop = Infinity;
               data.forEach(function(d){

                            d.id = d.id
                            d.pays = d.pays;
                            d.iig = +d.iig;
                            d.date = parseDate(d.date);
                            d.pop = +d.pop;

                            if (d.pop > max_pop)
                            max_pop = d.pop;

                            if (d.pop < min_pop)
                            min_pop = d.pop;


                            });

               x.domain([-500000, max_pop + 2000000]);

               y.domain([new Date(1987,0,1), new Date(2022,0,1)])


               r.domain(d3.extent(data, function(d){
                                  return d.iig;
                                  })).nice();

               svg.append('g')
               .attr('transform', 'translate(0,' + height + ')')
               .attr('class', 'x axis')
               .call(xAxis);

               svg.append('g')
               .attr('transform', 'translate(0,0)')
               .attr('class', 'y axis')
               .call(yAxis);

               svg.append('text')
               .attr('x', 10)
               .attr('y', 10)
               .attr('class', 'label')
               .text('Annee');

               svg.append('text')
               .attr('x', width)
               .attr('y', height - 10)
               .attr('text-anchor', 'end')
               .attr('class', 'label')
               .text('Population dans le pays');

               var Tooltip = d3.select("body")
               .append("div")
               .style("opacity", 0)
               .attr("class", "tooltip")
               .style("background-color", "white")
               .style("border", "solid")
               .style("border-width", "2px")
               .style("border-radius", "5px")
               .style("padding", "5px")

               var mouseover = function(d) {
               Tooltip
               .style("opacity", 1)
               d3.select(this)
               .style("stroke", "black")
               .style("opacity", 1)
               }
               var mousemove = function(d) {
               Tooltip
               .html( d.pays + "</br>Population:" + d.pop )
               .style("left", (d3.mouse(this)[0]+70) + "px")
               .style("top", (d3.mouse(this)[1])+250 + "px")
               }
               var mouseleave = function(d) {
               Tooltip
               .style("opacity", 0)
               d3.select(this)
               .style("stroke", "none")
               .style("opacity", 0.8)
               }

               svg.selectAll(".dot")
               .data(data)
               .enter().append("circle")
               .attr("class", "dot")
               .attr("r", function(d) { return r(d.iig); })
               .attr("cx", function(d) { return x(d.pop); })
               .attr("cy", function(d) { return y(d.date); })
               .style("fill", function(d) { return color(d.pays); })
               .on("mouseover", mouseover)
               .on("mousemove", mousemove)
               .on("mouseleave", mouseleave)



               });
        </script>

        <footer id="footer-copyright" class="footer-copyright">
          <div class="container">
            <div class="hm-footer-copyright text-center">
              <p>
                &copy; copyright yourname. design and developed by <a href="https://www.themesine.com/">themesine</a>
              </p><!--/p-->
            </div><!--/.text-center-->
          </div><!--/.container-->

          <div id="scroll-Top">
            <div class="return-to-top">
              <i class="fa fa-angle-up " id="scroll-top" ></i>
            </div>

          </div><!--/.scroll-Top-->

        </footer><!--/.footer-copyright-->

  </body>

</html>
